2003-04-08 Padraig O'Briain <padraig.obriain@sun.com>

	* access/cddisplayaccessible.c (cddisplay_accessible_ref_child):
	Omit warning message if index is too large.

	* access/pangoaccessible.c (pango_accessible_ref_state_set): New
	function to cause VISIBLE and SHOWING states to be reported.
	Fixes bug #106711.

2003-01-23  Irene Ryan <irene.ryan@sun.com>

	* help/C/gnome-cd.xml: updated the help manual for GNOME 2.2
	* help/C/gnome-cd-C.omf: updated the manual release info  
	
2003-01-11 Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* linux-cdrom.c (linux_cdrom_play): Added a break statment 
	* solaris-cdrom.c (solaris_cdrom_play): Added a break statment 
	* freebsd-cdrom.c (freebsd_cdrom_play): Added a break statment 

2003-01-09 Iain <iain@prettypeople.org>

	* gnome-cd.c (main): Apply patch from Owen Taylor for bug 102984

2002-12-16  Christian Neumair  <chris@gnome-de.org>

	* .cvsignore: Updated.
	* callbacks.c: Revamped about dialog.

2002-12-09 Iain <iain@prettypeople.org>

	* callbacks.c (about_cb): Remove translation, add extra copyright

2002-12-07 Iain <iain@prettypeople.org>

	* gnome-cd.c: Register buttons as stock buttons

	* theme.c: Remove loads of crap.

2002-12-07 Iain <iain@prettypeople.org>

	* gnome-cd.c (main): Show the window initially.

2002-12-07 Iain <iain@prettypeople.org>

	* callbacks.c (status_ok): Fix memory leak, check we don't deref a 0x0

2002-12-03  Christian Neumair  <chris@gnome-de.org>

	* callbacks.c: Revamped about dialog.

2002-10-09  Havoc Pennington  <hp@pobox.com>

	* preferences.c (preferences_dialog_show): call it "CD Player"

	* gnome-cd.c (gnome_cd_set_window_title): change title to "CD
	Player"
	(init_player): change title to "CD Player", and set 
	window role instead of window class for ICCCM compliance.
	Matched window stuff should still be able to key off the role, 
	I know it can in Sawfish.

2002-10-16  Kjartan Maraas  <kmaraas@gnome.org>

	* preferences (create_theme_model): Add call to closedir().
	Fixes a leak.
	
2002-10-10 Iain <iain@prettypeople.org>

	* gnome-cd.c (gnome_cd_set_window_title): Swap the title and artist
	around.
	(init_player): Make the error dialogs have good grammar form. :)
	Call it the CD player everywhere.
	(callbacks.c): Call it CD player.
	(preferences.c: Call it CD player.

2002-10-09 Iain <iain@prettypeople.org>

	*: Applied Redhat patches from Owen Taylor.

2002-08-30  Pier Luigi Fiorini  <plfiorini@supereva.it>

       * Makefile.am: Added eggtrayicon.[ch] to the SOURCES.

       * gnome-cd.c (init_player), gnome-cd.h:
       * callbacks.c (tray_icon_clicked):
       * callbacks.c (status_ok):
       Added the tray icon support, fixed bug #57553.

2002-10-08 Iain <iain@prettypeople.org>

	* gnome-cd.[ch]:
	* preferences.c: Applied Owen's patch to add a --device option.
	 
2002-10-08 Iain <iain@prettypeople.org>

	* gnome-cd.schemas.in.in: Added descriptions

2002-10-08 Iain <iain@prettypeople.org>

	* gnome-cd.schemas: Made the default on ext to stop

2002-09-24 Muktha <muktha.narayan@wipro.com>

	* preferences.c: Added accessible descriptions for the
	  radio buttons. Fixes issue 2 of #90550.

2002-10-07 Iain <iain@prettypeople.org>

	* preferences.c (preferences_dialog_show): Don't allow the close button
	to work if the device isn't right.
	(apply_clicked_cb): Ditto

	* cdrom.c (cdrom_get_status): Free status in the right place.

2002-10-07 Iain <iain@prettypeople.org>

	* cdrom.c (cdrom_set_device): Check if the device is ! NULL.
	(cdrom_init): Set the device to /dev/cdrom.
	(timeout_update_cd): When get_status returns FALSE, status is not valid.

	* gnome-cd.c (init_player): Get a new cdrom device once the device is 
	set. If it is not valid, get it again.

	* linux-cdrom (linux_cdrom_get_status): Free real status

2002-10-07  Iain <iain@prettypeople.org>

	* gnome-cd.c
	freebsd-cdrom.c
	linux-cdrom.c
	cdrom.c
	solaris-cdrom.c: Fixed memory leaks

2002-08-30  Narayana Pattipati <narayana.pattipati@wipro.com>

	* gnome-cd.c (init_player): Made changes so that the "Invalid CD 
	Device" error message shows error details only after clicking 
	Details button.  Bug#91776
	
	* cdrom.c : Changed the the linux specific error message to a 
	generic one.  Bug#91776

2002-10-07 Iain <iain@prettypeople.org>

	* solaris.c: Remove debugging spew from Bala

2002-09-23 Iain <iain@prettypeople.org>

	* gnome-cd.desktop.in: Fixed spelling

2002-09-23 Iain <iain@prettypeople.org>

	* preferences.c (preferences_dialog_show): Add a : to the label.
	Set a sensible default size.

2002-08-23  Muktha <muktha.narayan@wipro.com>
	
	* gnome-cd.c: Added 'Help' in the popup menu.

	* callbacks.c: Added the callback function help_cb.
	  Fixes #90545

2002-08-01  Iain <iain@prettypeople.org>

	* callbacks.c (volume_changed): Handle the value as being negative.

	* gnome-cd.c (init_player): Don't invert the slider, make it take
	values from -255.0 to 0.

2002-08-01  Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* preferences.c (apply_clicked_cb): Allow users to Change
	the default device
	
2002-07-01 Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* theme.c (theme_load): Assign a default theme if the one set does
	not exist bugid #86544

2002-06-20  Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* cdrom.h Added GNOME_CDROM_STATUS_NO_DISC and 
	GNOME_CDROM_STATUS_NO_CDROM.
	
	* solaris-cdrom.c: Get the proper satutus
	detection of cdrom in solaris from Gerald.Jelinek@sun.com

2002-07-09  Mark McLoughlin  <mark@skynet.ie>

	* gnome-cd.desktop.in: use X-GNOME-DocPath instead
	of DocPath.

2002-06-22 Iain <iain@prettypeople.org>

	* linux-cdrom.c: Removed all _()

	* solaris-cdrom.c: Removed some pointless debugging lines.

	* freebsd-cdrom.c: Removed all _()s and pointless debugging spewage.

2002-06-06  Satyajit Kanungo <satyajit.kanungo@wipro.com>

	* Makefile.am : Added DATADIR required for help callback.

	* preferences.c : Added the Help button in the prefernce dialog 
	  box and put the help callback.

2002-06-22  Iain <iain@prettypeople.org>

	* freebsd-cdrom.c (finalise): Fix typo.

2002-06-15  Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* cdrom.h Added GnomeCDRomDeviceLifetime and added this parameter
	to gnome_cdrom_construct
	* fix for bug 84477 

2002-05-30  Michael Meeks  <michael@ximian.com>

	* cdrom.c (not_ready_status_new): create a not ready
	status and return it.
	(timeout_update_cd): if get_status fails, set status
	as not ready, so that we get a positive edge when at
	last we can read the CD drive again ( on Solaris ), so
	that we re-read the track data correctly #83394

	* *.c: use g_new0 pretty much everywhere to save the
	plague of uninitialized bits.

2002-05-29 Iain <iain@ximian.com>

	* gnome-cd.c (init_player): Make the option menu expand to the
	fullsize of the window.

2002-05-29 Iain <iain@ximian.com>

	* cddb.c: Removed debugging spew.

2002-05-29 Iain <iain@ximian.com>

	* gnome-cd.c (init_player): Set the title to the correct GNOME
	 standard..
	(gnome_cd_set_window_title): Ditto.

	* preferences.c (preferences_dialog_show): Ditto.

2002-05-29 Iain <iain@ximian.com>

	* display.c (expose_event): Use the text colour for the text and not
	black.

2002-05-27 Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* gnome-cd.c (init_player): Added tooltip for Volume control and
	track list

2002-05-29  Michael Meeks  <michael@ximian.com>

	* callbacks.c (set_window_track_title): split out of
	(status_ok): here and do some more checking on
	the track index etc.

	* cdrom.c (gnome_cdrom_status_changed): copy the
	status while emitting the signal, so it doesn't
	get freed by some other method, during manipulations
	on the GnomeCD at a later date, while we're holding
	a pointer to it. #79778

2002-05-29  Michael Meeks  <michael@ximian.com>

	* preferences.c (preferences_free): don't
	de-reference an un-initialized pointer.

	* callbacks.c (play_cb): setup end_track, don't
	compare it with no effect.

	* gnome-cd.c (make_button_from_file): kill, unused.

	* access/factory.c (setup_factory): rename to
	something useful, remove bogus 'static' prototype
	from header !

	* *.[ch]: clean warnings, add missing prototypes
	etc. blah blah.
	
	* access/pangoaccessible.c
	(pango_accessible_get_text): fix gailutil code.

	* cdrom.c (gnome_cdrom_get_dev_fd): impl.
	(gnome_cdrom_open_dev, gnome_cdrom_close_dev): impl.
	(timeout_update_cd, gnome_cdrom_update_cd): impl.
	(cdrom_dispose): impl. to unhook the timeout.
	(cdrom_finalize): don't leak recent_status.
	(timeout_update_cd): remove == TRUE abomination.

	* linux-cdrom.c,
	* solaris-cdrom.c,
	* freebsd-cdrom.c: Fix rats nest of cut and paste
	evilness, much of it now cleanly genericized
	inside gnome-cdrom.c

2002-05-27  Michael Meeks  <michael@ximian.com>

	* gnome-cd.c (gnome_cd_build_track_list_menu):
	minor crasher fix.
	(main): force efence linkage.

2002-05-23 Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* callbacks.c (play_cb): fix for bug id 82744

2002-05-24 Iain <iain@ximian.com>

	* callbacks.c (set_track_option_menu): Helper function to block
	signals, set the history and unblock the signals.
	(status_ok): Use the helper functions.
	Reset the tracklist and play button when a CD is finished.

2002-05-13 Iain <iain@ximian.com>

	* display.c: Don't use RED!

2002-05-09 Iain <iain@ximian.com>

	* gnome-cd.c (init_player): Newer gui layout. Add some padding.

2002-05-03  jacob berkman  <jacob@ximian.com>

	* gnome-cd.[ch] (gcd_warning): don't inline, as it's more trouble
	than it's worth

2002-05-03 Iain <iain@ximian.com>

	* gnome-cd.c (init_player): Fix a typo, and rearrange gui slightly

2002-05-02 Iain <iain@ximian.com>

	* gnome-cd.c (gcd_warning): Quick function to print a warning only if
	GNOME_CD_DEBUG is set.

	* callbacks.c: Use gcd_warning instead of g_warning.

	* linux-cdrom.c: Use gcd_warning instead of g_warning.

2002-05-01 Iain <iain@ximian.com>

	* gnome-cd.schemas.in: Change the default theme to the media one.

2002-05-01 Iain <iain@ximian.com>

	* callbacks.c (status_ok): Don't pass NULL to either the set_window, 
	or the display_set_line.

2002-04-30  Kjartan Maraas  <kmaraas@gnome.org>

	* linux-cdrom.c: Fix a typo.
	
2002-04-30 Iain <iain@ximian.com>

	* display.c (expose_event): Draw the text in the right place.
	(cd_display_set_line): Don't do anything if the strings are the same.

	* gnome-cd (gnome_cd_set_window_title): Change the AND to an OR.

2002-04-29 Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* solaris-cdrom.c (solaris_cdrom_is_cdrom_device): Changed
	CDROMSTOP to CDROMVOLCTRL

2002-04-29 Iain <iain@ximian.com>

	* access/Makefile.am: Remove the includedir flag.

2002-04-25 Theo van Klaveren <t.vanklaveren@student.utwente.nl>

	* freebsd-cdrom.c: Last remaining string translations and string
	changes from linux-cdrom.c. Added one more permissions check.
	(freebsd_cdrom_is_cdrom_device): Use CDIOCGETVOL instead of
	CDIOCGETCAPABILITY, which wasn't supported by the ATAPI driver.

2002-04-25 Theo van Klaveren <t.vanklaveren@student.utwente.nl>

	* freebsd-cdrom.c: Translate some strings. Add extra permission/
	status checks. 
	(freebsd_cdrom_eject): Set refcount to to object to 0. 
	(freebsd_cdrom_get_status): Fix uninitialized variable. Get the
	current volume.
	(freebsd_cdrom_is_cdrom_device): Use CDIOCGETCAPABILITY
	instead of CDIOCSTOP for drive check.

2002-04-25 Iain <iain@ximian.com>

	* linux-cdrom.c (linux_cdrom_set_device): Return FALSE on failure. Doh.

	* preferences.c (do_device_changed): Actually check if there's an
	error and display it in a pretty dialog.

2002-04-25 Iain <iain@ximian.com>

	* linux-cdrom.c (linux_cdrom_set_device): Check for permission.
	(linux_cdrom_open): Ditto.

2002-04-25 Iain <iain@ximian.com>

	* linux-cdrom.c: Make error messages more better english grammar.
	(gnome_cdrom_new): Check we have permission to open the device, so we
	can give a more specific error.

	* gnome-cd.c (init_player): Print the error that the cd backend
	returned as it can be more specific.

2002-04-25 Iain <iain@ximian.com>

	* callbacks.c (status_ok): Sensitise everything.
	(cd_status_changed_cb): Set certain buttons unsensitive depending on
	the status.

2002-04-21 Iain <iain@ximian.com>

	* gnome-cd.c: Applied patch from Changwoo Ryu

2002-04-20 Iain <iain@ximian.com>

	* linux-cdrom.c (linux_cdrom_get_status): Failure to get volume isn't
	fatal.

	* solaris-cdrom.c (solaris_cdrom_get_status): Ditto

2002-04-10 Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

       * solaris-cdrom.c (solaris_cdrom_get_status): To get the initial volume
       (solaris_cdrom_set_volume): Sets both the system volume and cd drive
       volume
       (class_init):Added the method for volume

2002-04-19 Iain <iain@ximian.com>

	* linux-cdrom.c (linux_cdrom_is_cdrom_device): Don't use stop as the
	check. It, ummm, stops the CD playing.

2002-04-18 Theo van Klaveren <t.vanklaveren@student.utwente.nl>

	* freebsd-cdrom.c: Fix segfault on play by taking the track no. 
	returned from the IOCTL, not the one passed to it (which was garbage).

2002-04-17 Iain <iain@ximian.com>

	* preferences.c (add_relation): Do some Atk black magic.
	(add_paired_relations): Ditto.
	(preferences_dialog_show): Link the cd device label with it's entry,

2002-04-14 Iain <iain@ximian.com>

	* linux-cdrom.c: Make strings translatable by Christophe Fergeau

2002-04-14  Mikael Hallendal  <micke@codefactory.se>

	* access/pangoaccessible.[ch]: util/ -> libgail-util/

2002-04-13 Iain <iain@ximian.com>

	* gnome-cd.c (make_button_from_pixbuf): Make-a-button-from-a-pixbuf.
	duh!
	(init_player): Make all the buttons from the theme pixbufs.

	* prefereences.c (do_theme_changed): Change the widgets too.
	Remove debugging spewage.

	* theme.c (parse_theme): Ref all the pixbufs.
	(theme_free): Free the theme.
	(theme_change_widgets): Change the pixbufs in the widgets.

	* images/media-theme: New theme to test the widgert change.
	
2002-04-12 Iain <iain@ximian.com>

	* preferences.c (do_theme_changed): Change the theme.

2002-04-10 Iain <iain@ximian.com>

	* gnome-cd.desktop.in: Added DocPath so that documentation will
	appear.

2002-04-10 Theo van Klaveren <t.vanklaveren@student.utwente.nl>

	Sync with gnome-cd changes.

	* freebsd-cdrom.[ch]: Add extra safeguards for CDROM status.
	(freebsd_cdrom_is_cdrom_device): CDROMSTOP -> CDIOCSTOP.
	(freebsd_cdrom_set_volume): Impl.
	(class_init): Add new methods.

2002-04-08 Iain <iain@ximian.com>

	* cdrom.[ch]: Added a is_cdrom_device method to check if a device path
	is really a CDRom device.

	* linux-cdrom.c (linux_cdrom_is_cdrom_device): Send a CDROMSTOP ioctl
	to the path.
	(linux_cdrom_set_device): Check if the device is a CDRom device.
	(gnome_cdrom_new): Ditto.

	* solaris-cdrom.c: As above.

	* freebsd-cdrom.c: As above.

2002-04-08 Iain <iain@ximian.com>

	* callbacks.c (status_ok): Change the album/artist at the right time.

2002-04-08 Iain <iain@ximian.com>

	* callbacks.c (status_ok): Function that does all the stuff when the
	status is OK.
	(cd_status_changed_cb): Move all the OK stuff out into status_ok.

2002-04-07 Iain <iain@ximian.com>

	* preferences.c (restore_preferences): Check the dangerous options and
	print a warning about gconf schemas not installed and initialise them
	to values that won't cause crashes.

2002-04-04 Jayaraj Rajappan <jayaraj.rajappan@wipro.com>

	* access/pangoaccessible.c : added the get_index_in_parent interface.

2002-04-04 Iain <iain@ximian.com>

	* callbacks.[ch] (volume_changed): Change the CD volume.

	* cdrom.[ch] (cdrom_set_volume): Dummy "Not implemented" functions.
	(class_init): Connect the dummy function.
	(gnome_cdrom_set_volume): Call the real function.

	* gnome-cd.[ch] (init_player): Hook up a volume control.

	* linux-cdrom.c (linux_cdrom_get_status): Get the current volume.
	(linux_cdrom_set_volume): Set the volume.
	(class_init): Set the real method.

2002-04-02 Iain <iain@ximian.com>

	* cddb.c (count_tracks): Count the number of tracks in the info.
	(get_disc_info): If the number of tracks returned != the requested
	number, then NULL the info and accept it as bad data.

	* gnome-cd.c (rebuild_track_option_menu): Check that the info is
	valid before dereferencing.

2002-03-29 Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* solaris-cdrom.c (solaris_cdrom_eject): close the audio device when
	ejected,  fix for bug 75601

2002-03-25 Jayaraj Rajappan <jayaraj.rajappan@wipro.com>

	* Miscellaneous fixes in access directory.
	Files changed : access/pangoaccessible.c, access/pangoaccessible.h
        access/cddisplayaccessible.c

2002-03-30 Iain <iain@ximian.com>

	* gnome-cd.c (window_destroy_cb): ifdef out the close tray options.
	(main): Ditto

	* preferences.c (close_on_start_changed): Ifdefed out
	(restore_preferences): Ifdef out the closetray options.
	(preferences_free): Ditto.
	(prefs_destroy_cb): Ditto.
	(stop_close_toggled_cb): Ifdefed out.
	(change_stop_widget): Ifdef out the close tray options.
	(start_close_toggled_cb): Ifdefed out.
	(change_start_close_widget): Ditto.
	(preferences_dialog_show): Ifdefed out the close tray options.

2002-03-23 Iain <iain@ximian.com>

	* cddb.c (cddb_free_disc_info): Free an info struct.

	* callbacks.c (cd)status_changed_cb): In the Not OK sections, free the
	old disc info so that we won't access it.

2002-03-21 Jayaraj Rajappan <jayaraj.rajappan@wipro.com>

	* access/pangoaccessiblefactory.c - return correct factory type
	* access/cddisplayaccessiblefactory.c - return correct factory type

2002-03-20 Iain <iain@ximian.com>

	* gnome-cd.c (init_player): Use tigerts icons.

	* images/Makefile.am: Add tigert's icons.

2002-03-19 Balamurali Viswanathan <balamurali.viswanathan@wipro.com>

	* gnome-cd.c: Added basic session management.

2002-03-19 Iain Holmes <iain@ximian.com>

	* linux-cdrom.c (linux_cdrom_rewind): Check that the CD status is 
	GNOME_CDROM_STATUS_OK before trying to rewind.
	(linux_cdrom_back): Ditto.
	(linux_cdrom_ffwd): Ditto.
	(linux_cdrom_next): Ditto.

2002-03-14 Jayaraj Rajappan <jayaraj.rajappan@wipro.com>

	* pangoaccessible.c - pango_accessible_get_text() : fix to get
			      the updated text each time.

2002-03-13 Theo van Klaveren <t.vanklaveren@student.utwente.nl>

	* freebsd-cdrom.[ch]: Added these files. FreeBSD implementation of
	CD access routines.

	* Makefile.am: Add freebsd-cdrom.[ch].

2002-03-11 Iain <iain@ximian.com>

	* gnome-cd.c: Apply patch from Theo van Klaveren.

2002-03-10 Iain <iain@ximian.com>

	* linux-cdrom.c (update_cb): Use the old function.
	(linux_cdrom_get_status): Revert.

	* solaris-cdrom.c (solaris_cdrom_get_status): Layout stuff better.

2002-03-06 Balamurali Viswanathan <balamurali.viswanathan@wipro.com>
	* display.c theme.c gnome-cd.c 
	Removed some deprecated calls

2002-03-06  Iain <iain@ximian.com>

	* callbacks.c (restart_track_editor): Restart the track editor when
	it dies unexpectedly.
	(destroy_track_editor): Stop listening for the track editor death.
	(open_track_editor): Listen for track editor death.

2002-03-05  Iain <iain@ximian.com>

	* preferences.c (preferences_dialog_show): Apply patch from
	jayaraj.rajappan to attach the label to the entry widget.

2002-03-03  Iain <iain@ximian.com>

	* callbacks.c: Make a global track editor object.
	(destroy_track_editor): Free the global object.

	* gnome-cd.c: Free the track editor on quit.

2002-03-01  Iain <iain@ximian.com>

	* display.[ch]: Removed the default text stuff.
	(init): Just set the texts to " "

2002-03-01  Iain <iain@ximian.com>

	* cddb.[ch] (close_cddb_client): Destroy the CDDBSlave as we don't
	need it now.

	* gnome-cd.c (window_destroy_cb): destror the cddbslave.

2002-02-28  Iain <iain@ximian.com>

	* Added accessibility stuff for the display widget from 
	JAYARAJ P R <jayaraj.rajappan@wipro.com>
	
2002-02-28  Iain <iain@ximian.com>

	* gnome-cd.c (init_player): Make the track editor button ghosted.

	* callbacks.c (cd_status_changed_cb): Make the track editor button
	ghosted or not, depending on the status of the CD drive.

	* display.c: Remove debugging crap.

	* linux-cdrom.c (linux_cdrom_get_status): A function that just copies
	the old status.
	(linux_cdrom_real_get_status): A function that actually gets the
	status.

	* theme.c: Remove debugging crap.

2002-02-27  Iain <iain@ximian.com>

	* Makefile.am: Use the correct schema variable.

2002-02-27  Iain <iain@ximian.com>

	* .cvsignore: Add some more files

2002-02-27  Iain <iain@ximian.com>

	* Makefile.am: Add the Solaris stuff from Balamurali Viswanathan	

	* solaris-cdrom.[ch]: Solaris implementation for the CD player from
	Balamurali Viswanathan.

2002-02-26  Iain <iain@ximian.com>

	* Makefile.am: Make the IDL stuff.
	
	* callbacks.c: Include bonobo things.
	(open_track_editor): Start up the track editor.
	
	* cddb.c: Use new CDDBSlave methods.
	
	* gnome-cd.c (init_player): Don't make the track editor button ghosted

2002-02-24  Zbigniew Chyla  <cyba@gnome.pl>

	* callbacks.c (cd_status_changed_cb): Marked strings for translation.

2002-02-16  Iain <iain@ximian.com>

	* preferences.c (apply_clicked_cb): Don't return if prefs->device is
	NULL.

	* gnome-cd.c (init_player): Change the title on the window.

	* linux-cdrom.c (gnome_cdrom_new): Close the CD device if opening it
	succeeded.

2002-02-14  Iain <iain@ximian.com>

	* gnome-cd.c (init_player): Only dereference the error if it isn't 
	NULL.

	* linux-cdrom.c (gnome_cdrom_new): Allow NULL and "" for the device 
	name.

2002-02-14  Iain <iain@ximian.com>

	* callbacks.c (rewind_press_cb): Only set a new timeout if one isn't
	running.
	(rewind_release_cb): Zero the timeout value.
	(ffwd_press_cb): Only set a new timeout if one isn't running.
	(ffwd_release_cb): Zero the timeout value.

2002-02-14  Iain <iain@ximian.com>

	* callbacks.c (ffwd_press_cb): Call ffwd_timeout_cb so that the first
	click makes the cd player skip.
	(rewind_press_cb): Ditto.

2002-02-11  Iain <iain@ximian.com>

	* linux-cdrom.c (gnome_cdrom_new): Don't return NULL if the cd device
	can't be opened.

	* gnome-cd.c (init_player): Only connect to the cdrom if it exists.
	Display the preferences dialog if it can't.

2002-02-11  Iain <iain@ximian.com>

	* preferences.c (device_changed_cb): Don't strcmp on NULL
	(apply_clicked_cb): Don't strcmp on NULL.
	
2002-02-10  Iain <iain@ximian.com>

	* cddb.c (get_disc_info): Use the new CDDBSlave stuff.

2002-02--7  Iain <iain@ximian.com>

	* callbacks.c (open_preferences): Update for the new args.

	* gnome-cd.c (init_player): If the cdrom device gets set to blank,
	inform the user and give them the option of opening the prefs dialog
	to fix the problem.

	* preferences.c (do_device_changed): Only set a new device is cdrom !=
	NULL.
	(preferences_free): Remove the theme_id notify.
	(prefs_destroy_cb): Remove the theme_id notify.
	(theme_selection_changed_cb): Set the new theme.
	(change_theme_selection_widget): Change the theme to the new one.
	(create_tree_model): Create a list of themes.
	(preferences_dialog_show): Take a gboolean to set only the device.
	set widgets sensitive depending on that gboolean.

2002-02-02  Iain Holmes  <iain@ximian.com>

	* preferences.[ch]: New file for preferences.

	* Makefile.am: install the .schemas file

	* callbacks.[ch]: Open preferences callback added.

	* cdrom.[ch]: Add a set_device function.

	* gnome-cd.c (window_destroy_cb): Do the on-stop actions.
	(player_init): Create preferences.
	(main): Do the on-start actions.

	* linux-cdrom.c (linux_cdrom_set_device): Implement the set_device
	method.

2002-02-02  Seth Nickell  <snickell@stanford.edu>

	* gnome-cd.png:

	Change to Jimmac's pretty new CD icon :-)

2002-01-26  Iain Holmes  <iain@ximian.com>

	* images/lcd-theme/*: Added more icons, and lcd.theme file.

	* Makefile.am: Remove the includedir line, and add the THEME_DIR 
	define.

	* display.c: Define CDDisplayTheme structure.
	(cd_display_resize_images): Resize and reposition images.
	(expose_event): Resize the images if they need it. Use theme instead
	of priv->images.
	(cd_image_new): Only call gnome_pixmap_file if the filename isn't
	absolute. Initialise scaled with pixbuf and ref it.
	(make_fullname): Take a file and a theme name and work out the full
	path
	(cd_display_parse_theme): Parse the theme.

	* gnome-cd.c: Remove the pangoft2.h include. Set the default theme to
	lcd.
	(init_player): load the theme.

	* theme.c: New file to load the theme.
	
	
2002-01-26  Gediminas Paulauskas <menesis@delfi.lt>

	* gnome-cd.c: get translations in UTF-8

2002-01-21  Iain Holmes  <iain@ximian.com>

	* callbacks.c (cd_status_changed_cb): Handle the repeat issue when the
	CD is completed.

2002-01-20  Iain Holmes  <iain@ximian.com>

	* callbacks.c (play_cb): Play until the correct end track.
	(loopmode_changed_cb): Change the loopmode.
	(playmode_changed_cb): Change the playmode.

	* cdrom.c (cdrom_play): Change the parameters.
	(init): Init the loopmode and playmode.
	(gnome_cdrom_play): Change the parameters.

	* cdrom.h: Add GnomeCDRomMode;

	* display.c (size_request): Calculate the height of the images.
	(draw_pixbuf): Draw pixbuf using
	gdk_pixbuf_render_to_drawable_with_alpha.
	(expose_event): Draw the correct info icons.
	(realize): Add the events to the widget.
	(button_press_event): Check where the widget was clicked, change the
	icon as appropriate.
	(class_init): Create the signals and connect the
	button_press_callback.
	(init): Load the new icons.

	* gnome-cd.c (skip_to_track): Set the end track correctly.
	(init_player): Attach to the display signals.

	* linux-cdrom.c (linux_cdrom_next): Set the end correctly.
	(linux_cdrom_ffwd): Set the end correctly.
	(linux_cdrom_play): Set the end of the play correctly.
	(linux_cdrom_rewind): Set the end correctly.
	(linux_cdrom_back): Set the end track correctly.

	* images/Makefile.am: Add the new icons.

2002-01-18  Iain Holmes  <iain@ximian.com>

	* gnome-cd.c (make_popup_menu): Set the image for the menu, from
	either stock of file.

	* images/Makefile.am: Add the a-*-menu.png files

2002-01-18  Iain Holmes  <iain@ximian.com>

	* gnome-cd.c (init_player): Use some icons jimmac did.
	(make_popup_menu): Add a popup menu for the display.

2002-01-13  Iain Holmes  <iain@ximian.com>

	* display.c (draw_pixbuf): Add helper function so I can change how
	the pixbufs are drawn without having to change it in many places.
	(expose_event): Use draw_pixbuf. Remove the GC creations. Don't scale
	the pixbufs here, use the pre-calculated scaled ones.
	(scale_image): Scale the image to the size required.
	(size_allocate): Scale the image.
	(cd_image_new): Set the scaled pixbuf to NULL and set the x and y
	correctly.

2002-01-13  Iain Holmes  <iain@ximian.com>

	* display.c (expose_event): Don't fill the area with black.

	* images/Theme-Limitations: Document describing themes

2002-01-13  Iain Holmes  <iain@ximian.com>

	* display.c (size_allocate): Resize the images depending on the
	display size.
	(size_request): Play around with size.
	(expose_event): Loop through all the images, drawing the ones that
	are needed. Draw text in black gc.
	(cd_image_new): Create a new CDImage structure.
	(init): Load the images.

2002-01-12  Iain Holmes  <iain@ximian.com>

	* gnome-cd.c (gnome_cd_build_track_list_menu): Print the track number
	before the track name.

2002-01-11  Iain Holmes  <iain@ximian.com>

	* gnome-cd.c (window_destroy_cb): Unref the cdrom to stop it emitting
	signals while the rest of the window is being destroyed.
	(gnome_cd_build_track_list_menu): Block the changed signal while we
	change the tracklist menu.
	(make_button_from_widget): Set the border width around the buttons to
	2.

	* callbacks.c (cd_status_changed_cb): Block the signal again.
	
2002-01-11  Iain Holmes  <iain@ximian.com>

	* gnome-cd.c (skip_to_track): Skip to the currently selected track.
	(init_player): Connect skip_to_track to the option menu signal.

	* callbacks.c (cd_status_changed_cb): Check which track is visible
	in the option menu, and if it's not the same change it.

2002-01-11  Iain Holmes  <iain@ximian.com>

	* gnome-cd.c (init_player): Remove deprecated function use, set the
	default size for the window.

	* display.c (size_request): Recalculate the width/height in this
	function. 

2002-01-11  Iain Holmes  <iain@ximian.com>

	* gnome-cd.h: s/rebuild/build/

	* cddb.c (cddb_get_query): Rebuild the tracklist if the disc is
	already in the cache.

	* display.c (cd_display_clear): Calculate the correct width.

2002-01-10  Iain Holmes  <iain@ximian.com>

	* *.c: Add the emacs crap at the top.

	* callbacks.c (cd_status_changed_cb): Don't put the track name on 
	the display. Set the window title to something useful.

	* cddb.c (load_cddb_data): Rebuild the tracklist menu.

	* display.h: Remove the CD_DISPLAY_LINE_TRACK enum value.

	* gnome-cd.c (gnome_cd_set_window_title): Function to set the
	window title to something.
	(gnome_cd_build_track_list_menu): Generate an option menu from the
	tracknames.
	(init_player): Add an option menu for the tracks. Remove the mixer
	button and volume button.

	* linux-cdrom.c (linux_cdrom_get_status): Handle the other
	CDS_ status results.

2002-01-09  Iain Holmes  <iain@ximian.com>

	* cddb.c (load_cddb_data): Swap the artist and album title round. Opps

	* gnome-cd.c (make_button_from_widget): Set a short name for 
	accessibility.
	(make_button_from_file): Take a shortname.
	(make_button_from_stock): Take a shortname.
	(init_player): Set the short name for all the buttons. Make the
	tracklist, preferences and volume buttons inactive until they do stuff.

	* callbacks.c: Include i18n headers
	(eject_cb): Change the play buttons short name.
	(play_cb): Ditto.
	(stop_cb): Ditto.
	(ffwd_press_cb): Ditto.
	(next_cb): Ditto.
	(back_cb): Ditto.
	(rewind_press_cb): Ditto.
	
2002-01-06  Iain Holmes  <iain@ximian.com>

	* callbacks.c (cd_status_changed_cb): Use the cddb info if we have
	some.

	* cddb.c: Add a cddb cache for already loaded discids
	(load_cddb_data): Parse the CDDB data.
	(cddb_listener_event_cb): Set the cd info to NULL if there's an error.
	(cddb_make_disc_info): Create the discid as a string. Store the number
	of tracks.
	(cddb_get_query): Create the cache.

	* display.c: Add some return_if_fails

	* gnome-cd.c (init_player): Make the toplevel a GtkWindow rather 
	than a BonoboWindow.

	* gnome-cd.h: Define the GnomeCDDiscInfo struct.

	* linux-cdrom.c (linux_cdrom_get_status): Initialise the track number
	to 1.

2002-01-02  Iain Holmes  <iain@ximian.com>

	* callbacks.c (maybe_close_tray): Function to try to close the CD
	tray.
	(stop_cb): Call maybe_close_tray.
	(ffwd_cb): Ditto.
	(next_cb): Ditto.
	(back_cb): Ditto.
	(rewind_cb): Ditto.
	(cd_status_changed_cb): Update the display, get data from CDDB and
	make the debugging spew silent.

	* cddb.c (load_cddb_data): Stub function to load CDDB data.
	(listener_event_cb): Work out what the event callback meant.
	(cddb_make_disc_info): Create a new disc structure.
	(cddb_get_query): Calculate the offsets correctly.

	* cdrom.c (gnome_cdrom_copy_status): Clone a status.

	* cdrom.h: Move ASSIGN_MSF here.

	* display.c: Use the new enums.
	(cd_display_clear): Clear the display.

	* gnome-cd.c (pixbuf_from_file): Create a pixbuf from a file.
	(init_player): Set the default window icon. Set a better icon on the
	mixer button.

	* linux-cdrom.c (linux_cdrom_eject): Try to close the tray if it's
	open, otherwise eject.
	(linux_cdrom_get_cddb_data): Calculate the CDDB data from the CD.

	* images/Makefile.am: Add 2 new icons

2001-12-31  Iain Holmes  <iain@ximian.com>

	* callbacks.[ch] (play_cb): Update for new cd stuff.
	(update_cb): Remove.
	(cd_status_changed_cb): New callback function.
	
	* cdrom.[ch] (class_init): Add a signal.
	(gnome_cdrom_status_changed): Function to emit the signal.
	(msf_equals): Check if 2 GnomeCDRomMSFs are equal.
	(gnome_cdrom_status_equal): Check if 2 GnomeCDRomStatus are equal.

	* display.c: Remove some debugging spewage.

	* gnome-cd.c (init_player): Use the new GnomeCDRom stuff.

	* linux-cdrom.c: Rewrite to be more careful about opening and closing
	the device, do things better and generally work.

2001-12-09  Seth Nickell  <snickell@stanford.edu>

	* Makefile.am:
	* gnome-cd.desktop.in:
	* gnome-cd.png:

	Install a .desktop file into datadir/applications

2001-11-17  Iain Holmes  <iain@ximian.com>

	* callbacks.c (play_cb): Change the pause/play image depending on the
	buttons function.
	(stop_cb): Ditto
	(ffwd_press_cb): Ditto
	(next_cb): Ditto.
	(back_cb): Ditto.
	(rewind_press_cb): Ditto.

	* gnome-cd.h: Add entities for the pause/play images.

	* gnome-cd.c (init_player): Set up the pause play images.

2001-11-17  Iain Holmes  <iain@ximian.com>

	* gnome-cd.c (init_player): Set the last settings to be NOTHING, so
	that the first time the status is checked, if there is a disc, a 
	disc change will be registered.

2001-11-17  Iain Holmes  <iain@ximian.com>

	* gnome-cd.h (GnomeCD): Remove some unused items, add a last status
	entity.

	* gnome-cd.c (init_player): Remove the state initialisation and fix
	warning.

	* cddb.c: File to handle the cddb functions.

	* cdrom.[ch] (class_init): Add the pointer for the get_cddb_data method.
	(cdrom_get_cddb_data): Standard empty stub.
	(gnome_cdrom_free_cddb_data): Function to free the CDDB data.

	* linux-cdrom.c (linux_cdrom_get_cddb_data): Generate the data CDDB
	requires from the CD track info.
	(linux_cdrom_close_tray): Function that attempts to close the CD tray.

	* display.c (realize): Fix some warnings.
	(init): More warnings be gone.

	* Makefile.am: Add the CDDBSlave2 dir to the includes.

2001-11-17  Iain Holmes  <iain@ximian.com>

	* display.c: MAde the display into a GtkWidget.

	* gnome-cd.c (init_player): Remove all the PangoContext stuff.
	Use the new display widget instead of a drawing area.

2001-11-03  Iain Holmes  <iain@ximian.com>

	* gnome-cd.c (main): Added i18n stuff
